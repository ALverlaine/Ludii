// Possible rulesets for Thermenmuseum
//------------------------------------------------------------------------------

// Board 1
(define "NoExtensionJoinedDiagonal"
        (board
            	(add
                (merge {
                    (scale 2 1 (rectangle 1 3))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (scale 2 1 (shift 0 2.5 (rectangle 1 3)))
                })
                edges:{{3 7} {5 4} {9 1} {3 1} {1 4} {5 9} {9 7}}
                )
                use:Vertex
            )	
)

//Board 2
(define "TopExtensionJoinedDiagonal"
        (board
            	(add
                (merge {
                    (scale 2 1 (rectangle 1 3))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (scale 2 1 (shift 0 2.5 (rectangle 1 3)))
                    (scale 2 1 (shift 0 3 (rectangle 1 3)))
                })
                edges:{{3 7} {5 4} {9 1} {3 1} {1 4} {5 9} {9 7} {9 11}}
                )
                use:Vertex
            )	
)

//Board 3
(define "BothExtensionJoinedDiagonal"
        (board
            	(add
                (merge {
                    (scale 2 1 (rectangle 1 3))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (scale 2 1 (shift 0 2.5 (rectangle 1 3)))
                    (scale 2 1 (shift 0 3 (rectangle 1 3)))
                    (scale 2 1 (shift 0 -0.5 (rectangle 1 3)))
                })
                edges:{{3 7} {5 4} {9 1} {3 1} {1 4} {5 9} {9 7} {9 11} {1 14}}
                )
                use:Vertex
            )	
)

//Board 4
(define "NoExtensionNoJoinedDiagonal"
        (board
                (add
                (merge {
                    (rectangle 1 2)
                    (shift 1 0 (rectangle 1 3))
                    (shift 3 0 (rectangle 1 2))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (shift 0 2.5 (rectangle 1 2))
                    (shift 1 2.5 (rectangle 1 3))
                    (shift 3 2.5 (rectangle 1 2))
                })
                edges:{{9 5} {5 1} {9 11} {12 2} {13 7} {6 3} {6 7}}
                )
                use:Vertex
            )	
)

//Board 5
(define "TopExtensionNoJoinedDiagonal"
        (board
                (add
                (merge {
                    (rectangle 1 2)
                    (shift 1 0 (rectangle 1 3))
                    (shift 3 0 (rectangle 1 2))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (shift 0 2.5 (rectangle 1 2))
                    (shift 1 2.5 (rectangle 1 3))
                    (shift 3 2.5 (rectangle 1 2))
                    (scale 2 1 (shift 0 3 (rectangle 1 3)))
                })
                edges:{{9 5} {5 1} {9 11} {12 2} {13 7} {6 3} {6 7} {15 12}}
                )
                use:Vertex
            )
)

//Board 6
(define "BothExtensionNoJoinedDiagonal"
        (board
                (add
                (merge {
                    (rectangle 1 2)
                    (shift 1 0 (rectangle 1 3))
                    (shift 3 0 (rectangle 1 2))
                	(rectangle 2 1)
                	(shift 4 0 (rectangle 2 1))
                	(shift 4 1.5 (rectangle 2 1))
                	(shift 0 1.5 (rectangle 2 1))
                    (shift 0 2.5 (rectangle 1 2))
                    (shift 1 2.5 (rectangle 1 3))
                    (shift 3 2.5 (rectangle 1 2))
                    (scale 2 1 (shift 0 3 (rectangle 1 3)))
                    (scale 2 1 (shift 0 -0.5 (rectangle 1 3)))
                })
                edges:{{9 5} {5 1} {9 11} {12 2} {13 7} {6 3} {6 7} {15 12} {18 2}}
                )
                use:Vertex
            )	
)

//------------------------------------------------------------------------------
// Haretavl equipment and rules.

(define "HaretavlEquipment"
        (hand Each)
        (piece "Dog" P1 "StepToEmpty")
        (piece "Hare" P2 "StepToEmpty")	
)

(define "HaretavlRules"
	    (rules 
	            (start {
	                (place "Dog1" (handSite P1) count:3)
	                (place "Hare2" (handSite P2))
	            })
	            
	            phases:{
	            (phase "Placement"
	                (play 
	                    (move 
	                        (from (handSite Mover)) 
	                        (to (sites Empty))
	                    ) 
	                )
	                (nextPhase Mover ("HandEmpty" Mover) "Movement")
	            )
	            
	            (phase "Movement"
	                (play (forEach Piece))
	            )
	            }
	            
	            (end {
	                (if (no Moves P2) (result P1 Win))
	            }) 
	        )		
)


//------------------------------------------------------------------------------

(game "Thermenmuseum"
    <Ruleset>
)

//------------------------------------------------------------------------------

(option "Ruleset" <Ruleset> args:{ <ruleset>} {
	
	//--------------------------Haretavl Rulesets ---------------------------------------------------
	
    (item "NoExtensionJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("NoExtensionJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has no extension and joined diagonals."
    )*
    
    (item "TopExtensionJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("TopExtensionJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has an extension at the top and joined diagonals."
    )
    
    (item "BothExtensionJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("BothExtensionJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has two extensions and joined diagonals."
    )
    
    (item "NoExtensionNoJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("NoExtensionNoJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has no extension and no joined diagonals."
    )
    
    (item "TopExtensionNoJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("TopExtensionNoJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has an extension at the top and no joined diagonals."
    )
    
    (item "BothExtensionNoJoinedDiagonalHaretavl" 
    <
    (players 2)
    (equipment {
        ("BothExtensionNoJoinedDiagonal")
        ("HaretavlEquipment")
    })
    ("HaretavlRules")
    >  
    "The board has two extensions and no joined diagonals."
    )
})

//------------------------------------------------------------------------------

(metadata 
    
	(info {
		
	})
		
    (graphics {
        (show Edges Diagonal Hidden)
        (piece Families {"Abstract" "Themed"})
    })
    
)
