(define "ThrowValue" (mapEntry "Throw" (count Pips)))

//------------------------------------------------------------------------------

(game "Boolik"
    (players <Player:num>)
    (equipment {
        (board (rectangle 1 15) use:Edge)
        (piece "Marker" Each)
        (regions "AllSites" (sites Board Vertex))
        (map "Throw" {(pair 0 5) (pair 1 1) (pair 2 2) (pair 3 3) (pair 4 4)})
        (dice d:2 from:0 num:4)
        (hand Each)
    })
    (rules
    	(start {
            <Player:teams>
            (place "Marker" "Hand" count:5)
    	})
        (play (do (roll) next:(forEach Piece)))
        (end (if (no Moves Next) (result Mover Win)))
    )
)

//------------------------------------------------------------------------------

(option "Players" <Player> args:{ <num> <teams>}
{
(item "2" <2>
<
(set Team 1 {P1})
(set Team 2 {P2})
>
"The game has 2 players.")  

(item "4" <4> 
<
(set Team 1 {P1 P3})
(set Team 2 {P2 P4})
>
"The game has 4 players.")*  

(item "6" <6> 
<
(set Team 1 {P1 P3 P5})
(set Team 2 {P2 P4 P6})
>
"The game has 6 players.")   

(item "8" <8> 
<
(set Team 1 {P1 P3 P5 P7})
(set Team 2 {P2 P4 P6 P8})
>
"The game has 8 players.")   

(item "10" <10> 
<
(set Team 1 {P1 P3 P5 P7 P9})
(set Team 2 {P2 P4 P6 P8 P10})
>
"The game has 10 players.")   

(item "12" <12> 
<
(set Team 1 {P1 P3 P5 P7 P9 P11})
(set Team 2 {P2 P4 P6 P8 P10 P12})
>
"The game has 12 players.")   

(item "14" <14> 
<
(set Team 1 {P1 P3 P5 P7 P9 P11 P13})
(set Team 2 {P2 P4 P6 P8 P10 P12 P14})
>
"The game has 14 players.")   

(item "16" <16> 
<
(set Team 1 {P1 P3 P5 P7 P9 P11 P13})
(set Team 2 {P2 P4 P6 P8 P10 P12 P14})
>
"The game has 16 players.")   

})

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "Boolik is a capturing game played by the Qeqchi people of Guatemala. It is typically played on the floor of a house at night, with two teams of people. ")
        (rules "Fifteen corn kernels are placed in a line; the playing spaces are the empty spaces between the kernels. Four corn kernels used as dice, marked on one side. The value of a throw is equal to the number of marked sides that land up, except when no marked sids are up, when the value is 5. Any number of players, who play on two teams, each starting from one side of the board. Five pieces per player. Players take turns moving pieces according to the throws of the corn, with two throws per turn. When a player reaches the opposite end of the board, they move to the start and continue moving in the same direction. If a piece lands on a space occupied by an opponent's piece, the player then moves in the reverse direction, carrying the opponent's piece with it in an attempt to move past the starting point and off the board. When the player moves past the starting point and then moves off the board, the opponent's piece is captured. The player who made the capture enters their piece again on their next turn. However, if the opponent lands on a piece carrying one of their pieces away, they then start carrying both of those pieces back to their starting point, freeing the captured piece and capturing the other player's piece. Players belonging to the same team may land on the same spot, but both are taken back to start if the opponent lands on them. Players cannot enter more than one of their pieces on the board at one time. When all five of a player's pieces are captured, they continue to use their throws to help their teammates. The first team to capture all of the opposing team's pieces wins.")
        (source "Culin 1907: 141-143.")
        (version "1.2.0")
        (classification "race/WishlistDLP")
        (credit "Eric Piette")
        (origin  "This game was played in Guatemala, around 1899.")
        }
    )
    
    (graphics {
        (piece Scale "Stick" 0.5)
        (show Edges (colour Hidden))
        (show Symbol "corn" "AllSites" Vertex fillColour:(colour Yellow) edgeColour:(colour Black) scale:0.5)
        (piece Foreground "Die" state:1 image:"star" fillColour:(colour White) scale:0.2)
        
    })
    
)
