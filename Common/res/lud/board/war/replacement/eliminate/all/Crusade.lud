(game "Crusade"
    (players 2)
    (equipment {
        (board (square 8))
        (piece "Ball" Each
            (move Step
                (to if:(is Enemy (who at:(to)))
                    (apply
                        (remove (to))
                    )
                )
                (then
                    (forEach Site
                        (sites Around (last To))
                        (if (is Enemy (who at:(site)))
                            (and
                                (remove (site))
                                (add (piece (id "Ball" Mover)) (to (site)))
                            )
                        )
                    )
                )
            )
        )
    })
    (rules
        (start {
            //            (place "Ball1" (difference (union (sites Top) (sites Right)) (union {(sites Left) (sites Bottom) (intersertion (sites Top) (sites Right))})))
            //            (place "Ball2" (difference (union (sites Bottom) (sites Left)) (union {(sites Right) (sites Top) (intersertion (sites Bottom) (sites Left))})))
            (place "Ball1" (sites Phase 1))
            (place "Ball2" (sites Phase 0))
        })
        
        (play (forEach Piece))
        
        (end (if (no Moves Next)
                (byScore {
                    (score P1 (count Pieces P1))
                    (score P2 (count Pieces P2))
                })
            )
        )
    )
)

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        }
    )
    
    (graphics {
        (board Style Chess)
    })
    
)
