(game "Ratio"
    (players {(player S) (player N)})
    <Game:equipment>
    (rules
        <Game:start>
        <Game:play>
        <Game:end>
    )
)

//------------------------------------------------------------------------------

(option "Game" <Game> args:{ <equipment> <start> <play> <end>}
    {
    (item "Game I" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge 
                            {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                            }
                        )
                        vertices:{3 5 1}
                    )
                    edges:{{0 3} {1 5} {2 7} {0 1}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (move Step Adjacent 
                    (to 
                        if:(and
                            (if (= 1 (count Turns)) (!= (centrePoint) (to)) True)
                            (is Empty (to))
                        )
                    )
                )
            )
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (expand (sites Top)))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play (forEach Piece))
        )
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game I."
    )*  
    
    (item "Game II" 
            <
            (equipment {
                (board
                		(add
                        (remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{3 5}
                        )
                        edges:{{0 4} {2 6}}
                        )
                    use:Vertex
                )
                
                (piece "Foot" P1 (move Step Adjacent  (to if:(is Empty (to)))))
                (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (no Moves P1) (result P2 Win))
                (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
            }) 
            >
            "The rules of the game II."
        ) 
    
    (item "Game III" 
            <
            (equipment {
                (board
                		(add
                        (remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{1}
                        )
                        edges:{{0 1} {3 9}}
                        )
                    use:Vertex
                )
                
                (piece "Foot" P1 (move Step Adjacent  (to if:(is Empty (to)))))
                (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (no Moves P1) (result P2 Win))
                (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
            }) 
            >
            "The rules of the game III."
        )
    
    (item "Game IV" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{7}
                        )
                		edges:{{6 7} {8 4}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 (move Step Adjacent  (to if:(is Empty (to)))))
                (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (no Moves P1) (result P2 Win))
                (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
            }) 
            >
            "The rules of the game IV."
        )
    
    (item "Game V" 
            <
            (equipment {
                (board
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                    use:Vertex
                )
                
                (piece "Foot" P1 (move Step Adjacent  (to if:(is Empty (to)))))
                (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (no Moves P1) (result P2 Win))
                (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
            }) 
            >
            "The rules of the game V."
        )
    
    (item "Game VI" 
            <
            (equipment {
                (board
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                    use:Vertex
                )
                
                (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
                (piece "Gnome" P2 
                	(move Step 
                		(from (from) if:(= 0 (state at:(from))))
                		(directions {Forwards Rightward Leftward})
                		(to if:(is Empty (to)))
                		(then
                			(if (all Sites (difference (sites Occupied by:Mover) (last To)) if:(!= 0 (state at:(site))))
                				(forEach Site
                					(sites Occupied by:Mover)
                					(set State at:(site) 0)
                				)
                				(and
                					(set State at:(last To) 1)
                					(moveAgain)
                				)
                			)
                		)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (union (sites Centre) (intersection (sites Board) (expand (sites Bottom))))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (and (= (count MovesThisTurn) 2) (no Moves Next)) (result P2 Win))
                (if (or (no Moves P2) (is In (where "Foot" P1) (sites P2))) (result P1 Win))
            }) 
            >
            "The rules of the game VI."
        )
    
    (item "Game VII" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{1 3 5 7}
                            )
                	    edges:{{0 3} {1 4} {2 6} {2 5} {0 1} {3 4}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent  (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {Forwards Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play (forEach Piece))
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game VII."
        )
    
    (item "Game VIII" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{7 3 5}
                            )
                		edges:{{0 4} {2 5} {4 5} {3 6}}
                	     )
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                		(then
                			(if 
                				(can Move
                					(hop 
                							(from (last To))
                							Adjacent
                							(between if:(is Enemy (who at:(between))))
                	                		(to if:(is Empty (to)))	
                					)
                					)
                					(moveAgain)
                			)
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {Forwards Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play 
                	(if (and (!= 1 (count Turns)) (is Prev Mover))
                		(or
    					(move Hop 
    							(from (last To))
    							Adjacent
    							(between if:(is Enemy (who at:(between))))
    	                		(to if:(is Empty (to)) (apply (remove (between))))	
    	                		(then
    	                    			(if 
    	                    				(can Move
    	                    					(hop 
    	                    							(from (last To))
    	                    							Adjacent
    	                    							(between if:(is Enemy (who at:(between))))
    	                    	                		(to if:(is Empty (to)))	
    	                    					)
    	                    					)
    	                    					(moveAgain)
    	                    			)
    	                    		)
    					)
    					(move Pass)
    					)
                		(forEach Piece)
                	)
                )
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game VIII."
        )
    
    (item "Game IX" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{1 3 5}
                            )
                		edges:{{0 3} {1 5} {7 2} {0 1}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                		(then
                			(if 
                				(can Move
                					(hop 
                							(from (last To))
                							Adjacent
                							(between if:(is Enemy (who at:(between))))
                	                		(to if:(is Empty (to)))	
                					)
                					)
                					(moveAgain)
                			)
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {BR BL Forwards Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play 
                	(if (and (!= 1 (count Turns)) (is Prev Mover))
                		(or
    					(move Hop 
    							(from (last To))
    							Adjacent
    							(between if:(is Enemy (who at:(between))))
    	                		(to if:(is Empty (to)) (apply (remove (between))))	
    	                		(then
    	                    			(if 
    	                    				(can Move
    	                    					(hop 
    	                    							(from (last To))
    	                    							Adjacent
    	                    							(between if:(is Enemy (who at:(between))))
    	                    	                		(to if:(is Empty (to)))	
    	                    					)
    	                    					)
    	                    					(moveAgain)
    	                    			)
    	                    		)
    					)
    					(move Pass)
    					)
                		(forEach Piece)
                	)
                )
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game IX."
        )
    
    (item "Game X" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{3 5}
                            )
                		edges:{{0 4} {2 6}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                		(then
                			(if 
                				(can Move
                					(hop 
                							(from (last To))
                							Adjacent
                							(between if:(is Enemy (who at:(between))))
                	                		(to if:(is Empty (to)))	
                					)
                					)
                					(moveAgain)
                			)
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {Forwards Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play 
                	(if (and (!= 1 (count Turns)) (is Prev Mover))
                		(or
    					(move Hop 
    							(from (last To))
    							Adjacent
    							(between if:(is Enemy (who at:(between))))
    	                		(to if:(is Empty (to)) (apply (remove (between))))	
    	                		(then
    	                    			(if 
    	                    				(can Move
    	                    					(hop 
    	                    							(from (last To))
    	                    							Adjacent
    	                    							(between if:(is Enemy (who at:(between))))
    	                    	                		(to if:(is Empty (to)))	
    	                    					)
    	                    					)
    	                    					(moveAgain)
    	                    			)
    	                    		)
    					)
    					(move Pass)
    					)
                		(forEach Piece)
                	)
                )
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game X."
        )
    
    (item "Game XI" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{3 5}
                            )
                		edges:{{0 4} {2 6}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                		(then
                			(if 
                				(can Move
                					(hop 
                							(from (last To))
                							Adjacent
                							(between if:(is Enemy (who at:(between))))
                	                		(to if:(is Empty (to)))	
                					)
                					)
                					(moveAgain)
                			)
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {BR BL FL FR Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play 
                	(if (and (!= 1 (count Turns)) (is Prev Mover))
                		(or
    					(move Hop 
    							(from (last To))
    							Adjacent
    							(between if:(is Enemy (who at:(between))))
    	                		(to if:(is Empty (to)) (apply (remove (between))))	
    	                		(then
    	                    			(if 
    	                    				(can Move
    	                    					(hop 
    	                    							(from (last To))
    	                    							Adjacent
    	                    							(between if:(is Enemy (who at:(between))))
    	                    	                		(to if:(is Empty (to)))	
    	                    					)
    	                    					)
    	                    					(moveAgain)
    	                    			)
    	                    		)
    					)
    					(move Pass)
    					)
                		(forEach Piece)
                	)
                )
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game XI."
        )
    
    (item "Game XII" 
            <
            (equipment {
                (board
                		(add
                		(remove
                            (merge 
                                {
                                (rectangle 3 3 diagonals:Alternating) 
                                (shift 0 2 (wedge 2)) 
                                (shift 0 -1 (rotate 180 (wedge 2))) 
                                }
                            )
                            vertices:{7}
                		)
                		edges:{{4 8} {6 7}}
                		)
                    use:Vertex
                )
                
                (piece "Foot" P1 
                	(or
                	(move Step Adjacent (to if:(is Empty (to))))
                	(move Hop Adjacent
                		(between if:(is Enemy (who at:(between))))
                		(to if:(is Empty (to))
                			(apply (remove (between)))
                		)
                		(then
                			(if 
                				(can Move
                					(hop 
                							(from (last To))
                							Adjacent
                							(between if:(is Enemy (who at:(between))))
                	                		(to if:(is Empty (to)))	
                					)
                					)
                					(moveAgain)
                			)
                		)
                	)
                	)
                )
                (piece "Gnome" P2
                	(or
                	(move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                	(move Hop 
                			(directions {BR BL FL FR Rightward Leftward})
                    		(between if:(is Enemy (who at:(between))))
                    		(to if:(is Empty (to))
                        		(apply (remove (between)))
                    		)
                    	)
                	)
                )
                (hand P1)
                (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
                (regions "Home" P1 (sites Top))
            })
            > 
            <
            (start {
                (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
                (place "Foot1" (handSite P1))
            })
            >
            <
            phases:{
            (phase "Opening"
                (play
                    (move 
                        (from (handSite Mover))
                        (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                        (then (moveAgain))
                    )
                )
                (nextPhase "Main")
            )
            (phase "Main"
                (play 
                	(if (and (!= 1 (count Turns)) (is Prev Mover))
                		(or
    					(move Hop 
    							(from (last To))
    							Adjacent
    							(between if:(is Enemy (who at:(between))))
    	                		(to if:(is Empty (to)) (apply (remove (between))))	
    	                		(then
    	                    			(if 
    	                    				(can Move
    	                    					(hop 
    	                    							(from (last To))
    	                    							Adjacent
    	                    							(between if:(is Enemy (who at:(between))))
    	                    	                		(to if:(is Empty (to)))	
    	                    					)
    	                    					)
    	                    					(moveAgain)
    	                    			)
    	                    		)
    					)
    					(move Pass)
    					)
                		(forEach Piece)
                	)
                )
            )
            }
            >
            <
            (end {
                (if (no Moves P2) (result P1 Win))
                (if (= Off (where "Foot" P1)) (result P2 Win))
            }) 
            >
            "The rules of the game XII."
        )
})

//------------------------------------------------------------------------------

(metadata 
    (info
        {
        }
    )
    
    (graphics {
        (player Colour P1 (colour White))
        (player Colour P2 (colour White))
    })
    
)
