(define "CloserToCentre"
    (>= (count Steps Orthogonal (from) (centrePoint)) 
        (count Steps Orthogonal (to) (centrePoint)) 
    )
)

//------------------------------------------------------------------------------

(game "Agon"  
    (players 2)  
    (equipment { 
        (board (hex 6))
        (piece "Pawn" Each 
        	(move Step 
        		(to if:(and 
        				(is Empty (to))
        				("CloserToCentre")
        			)
        		)
        	)
        ) 
        (piece "Queen" Each
        		(move Step 
                		(to if:(and 
                				(is Empty (to))
                				("CloserToCentre")
                			)
                		)
                	)		
        ) 
    })  
    (rules 
        (start {
            (place "Pawn1" (sites {89 60 20 3 6 51}))
            (place "Pawn2" (sites {87 84 39 1 30 70}))
            (place "Queen1" 85)
            (place "Queen2" 5)
        })
        (play 
            (forEach Piece)
        )
        (end 
        	(if 
        		(and
        			(all Sites 
        				(difference (sites Around (sites Centre)) (sites Centre))
        				if:(= (id "Pawn" Mover) (what at:(site)))
        			)
        			(= (centrePoint) (where "Queen" Mover)) 
        		)
        		(result Mover Win)
        	)
        )
    )
)

//------------------------------------------------------------------------------

(metadata 
    
    (graphics {
        (piece Scale "Pawn" 0.75)
        (board Colour InnerEdges (colour Black))
        (board Colour OuterEdges (colour Black))
        (show Symbol "star" (sites Centre) fillColour:(colour Red) edgeColour:(colour Red) scale:0.8) 
        (region Colour 
            (union 
                (sites Outer) 
                (sites {42 53 63 72 73 74 75 67 58 48 37 27 18 17 16 15 23 32 44 55 56 46 35 34})
            )
            (colour 255 205 1)
        )
        (region Colour 
            (union 
                (sites Centre) 
                (sites {41 52 62 71 79 80 81 82 83 76 68 59 49 38 28 19 11 10 9 8 7 14 22 31 24 25 26 36 47 57 66 65 64 54 43 33})
            )
            (colour 192 64 64)
        )
    })
)
